(this["webpackJsonpreact-airports"]=this["webpackJsonpreact-airports"]||[]).push([[4],{340:function(e,t,a){e.exports={root:"Map_root__2FdYZ"}},342:function(e,t,a){e.exports={root:"Search_root__102jI",searchInput:"Search_searchInput__1SmLZ",noResults:"Search_noResults__1etpD",resultsWrapper:"Search_resultsWrapper__1W-Vo",resultLabel:"Search_resultLabel__1jrpo",popupHeader:"Search_popupHeader__PsEZV"}},402:function(e,t,a){e.exports={root:"SearchAirport_root__2CjAk",searchContainer:"SearchAirport_searchContainer__2jzFw",map:"SearchAirport_map__WeABs"}},403:function(e,t,a){e.exports={root:"Main_root__zd-uY"}},414:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(94),o=a(69),i=a(12),l=a(404),s=a(319),u=a(417),m=a(419),p=a(421),f=a(413),b=a(422),h=a(420),j=a(323),d=5,O=8,g=3,_=18,v=a(340),E=a.n(v),N=function(e){var t=e.markers,a=e.center,n=e.className,c=e.lines,o=e.zoom,i=function(e,t){return a.lat===e&&a.lng===t?1:.5};return r.a.createElement(m.a,{center:a,zoom:o||d,minZoom:g,maxZoom:_,className:Object(j.a)(E.a.root,n)},r.a.createElement(p.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.osm.org/{z}/{x}/{y}.png"}),!Object(u.a)(t)&&t.map((function(e){var t=e.lat,a=e.lng,n=e.info,c=e.id;return r.a.createElement(f.a,{position:{lat:t,lng:a},opacity:i(t,a),key:c},r.a.createElement(b.a,null,n))})),c&&!Object(u.a)(c)&&c.map((function(e,t){return r.a.createElement(h.a,{positions:e,key:t})})))},S=function(e){return e.main},k=function(e){return e.search},y=a(418),C=a(338),A=a(416),L=a(415),z=a(339);var I=a(105),R=a(342),x=a.n(R),W=Object(n.memo)((function(e){var t=e.list,a=e.onResultClick,o=e.searchCondition,i=e.onIconClick,l=Object(c.b)(),m=Object(c.c)(k).searchResults,p=Object(n.useState)(""),f=Object(s.a)(p,2),b=f[0],h=f[1],d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300,a=Object(n.useState)(e),r=Object(s.a)(a,2),c=r[0],o=r[1];return Object(n.useEffect)((function(){var a=setTimeout((function(){o(e)}),t);return function(){clearTimeout(a)}}),[e,t]),c}(b,800),O=b&&b.length>=3&&d,g=function(e){a(e,t)},_=function(e){e.stopPropagation(),i(e,t)};return Object(n.useEffect)((function(){var e,a,n=[];O&&(n=t.filter((function(e){return o.map((function(t){return e[t]&&e[t].toLowerCase()})).join(",").includes(b.toLowerCase())}))),l((e=n,{type:I.a,payload:e,callback:a}))}),[b,t,O,l]),r.a.createElement("div",{className:x.a.root},r.a.createElement(y.a,{icon:"search",placeholder:"Search airport",className:x.a.searchInput,transparent:!0,loading:!d&&!!b,onChange:function(e){var t=e.target.value;h(t||"")}}),!Object(u.a)(m)&&r.a.createElement("div",{className:x.a.resultsWrapper},r.a.createElement(C.a,{className:x.a.resultLabel,attached:"top right",size:"tiny"},m.length," ",m.length>1?"results":"result"),m.map((function(e,t){var a=e.iata,n=e.name,c=e.country,o=e.city,i=e.icao,l=e.id;return r.a.createElement(A.a,{key:t,header:r.a.createElement(L.a,{content:"Where can I fly from here? Click",position:"top right",inverted:!0,basic:!0,trigger:r.a.createElement("div",{className:Object(j.a)("header",x.a.popupHeader)},a,r.a.createElement("span",{onClick:_,"data-id":l},r.a.createElement(z.a,{name:"globe"})))}),meta:i,description:"".concat(n," / ").concat(o,", ").concat(c),"data-id":l,onClick:g})})),r.a.createElement("span",null,"Data from"," ",r.a.createElement("a",{href:"https://openflights.org/data.html"},"OpenFlights"))),Object(u.a)(m)&&O&&r.a.createElement("span",{className:x.a.noResults},"No results"))}),o.a),w=a(402),Z=a.n(w),M=Object(n.memo)((function(){var e=Object(n.useState)({lat:51.477928,lng:-.001545}),t=Object(s.a)(e,2),a=t[0],o=t[1],i=Object(n.useState)(d),m=Object(s.a)(i,2),p=m[0],f=m[1],b=Object(n.useState)(null),h=Object(s.a)(b,2),j=h[0],g=h[1],_=Object(n.useState)([]),v=Object(s.a)(_,2),E=v[0],y=v[1],C=Object(n.useState)([]),A=Object(s.a)(C,2),L=A[0],z=A[1],I=Object(c.c)(S),R=I.airportsList,x=I.routesList,w=Object(c.c)(k).searchResults,M=function(){f(d),y([]),z([])},T=function(e,t){return!Number.isNaN(e)&&!Number.isNaN(t)},F=Object(n.useMemo)((function(){M();var e=[];return w.forEach((function(t){var a=t.lat,n=t.lng,r=t.name,c=t.id;T(+a,+n)&&(e=[].concat(Object(l.a)(e),[{lat:+a,lng:+n,info:r,id:c}]))})),e}),[w]),H=function(e,t){var a=e.currentTarget&&e.currentTarget.getAttribute("data-id");return t.find((function(e){return e.id===a}))||null},D=function(e){var t=e.lat,a=e.lng;T(+t,+a)&&o({lat:+t,lng:+a}),M(),f(O)};return Object(n.useEffect)((function(){if(j&&(D(j),!Object(u.a)(x))){var e=(t=j,x.filter((function(e){return e.destinationAirport===t.iata}))).map((function(e){return e.sourceAirport})).join(",");y(R.filter((function(t){return e.includes(t.iata)})))}var t}),[j]),Object(n.useEffect)((function(){if(!Object(u.a)(E)&&j){var e=j.lat,t=j.lng,a=E.reduce((function(a,n){return a=[].concat(Object(l.a)(a),[[{lat:e,lng:t},{lat:+n.lat,lng:+n.lng}]])}),[]);z(a)}}),[E]),r.a.createElement("div",{className:Z.a.root},r.a.createElement(N,{markers:F,center:a,zoom:p,className:Z.a.map,lines:L}),r.a.createElement("div",{className:Z.a.searchContainer},r.a.createElement(W,{list:R,searchCondition:["iata","name","country","city"],onResultClick:function(e,t){var a=H(e,t);a&&T(+a.lat,+a.lng)&&D(a)},onIconClick:function(e,t){var a=H(e,t);a&&T(+a.lat,+a.lng)&&g(a)}})))}),o.a),T=a(403),F=a.n(T);t.default=Object(n.memo)((function(){var e=Object(c.b)();return Object(n.useEffect)((function(){var t;e({type:i.a,callback:t}),e(function(e){return{type:i.d,callback:e}}())}),[e]),r.a.createElement("div",{className:F.a.root},r.a.createElement(M,null))}),o.a)}}]);
//# sourceMappingURL=4.4bab0d73.chunk.js.map